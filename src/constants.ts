import { PluginSettings } from "./types";
import { flattenVars } from "./utils";

export const DEFAULT_VARS = {
  "Plugin Integrations": {
    "--iconize-icon-color": "#00aaff",
  },
  Backgrounds: {
    "--background-primary": "#1e1e1e",
    "--background-primary-alt": "#252525",
    "--background-secondary": "#2a2a2a",
    "--background-secondary-alt": "#303030",
    "--background-modifier-border": "#444444",
    "--background-modifier-border-hover": "#555555",
    "--background-modifier-border-focus": "#007acc",
    "--background-modifier-flair": "#3a3a3a",
    "--background-modifier-hover": "#3a3a3a",
    "--background-modifier-active": "#4a4a4a",
  },
  Text: {
    "--text-normal": "#e0e0e0",
    "--text-muted": "#999999",
    "--text-faint": "#666666",
    "--text-on-accent": "#ffffff",
    "--text-accent": "#00aaff",
    "--text-accent-hover": "#33bbff",
    "--text-selection": "#007acc66",
    "--h1-color": "#e0e0e0",
    "--h2-color": "#d0d0d0",
    "--h3-color": "#c0c0c0",
    "--h4-color": "#b0b0b0",
    "--h5-color": "#a0a0a0",
    "--h6-color": "#909090",
  },
  Markdown: {
    "--hr-color": "#444444",
    "--blockquote-border-color": "#007acc",
    "--blockquote-color": "#d0d0d0",
    "--blockquote-bg": "transparent",
    "--tag-color": "#33bbff",
    "--tag-color-hover": "#33bbff",
    "--tag-bg": "#1e1e1e",
    "--checklist-done-color": "#33bbff",
    "--code-normal": "#e0e0e0",
    "--code-background": "#2d2d2d",
    "--text-highlight-bg": "#2c6887",
  },
  Notices: {
    "--cm-notice-text-default": "#e0e0e0",
    "--cm-notice-bg-default": "#2a2a2a",
  },
  "Interactive Elements": {
    "--interactive-normal": "#5a5a5a",
    "--interactive-hover": "#6a6a6a",
    "--interactive-accent": "#007acc",
    "--interactive-accent-hover": "#3399dd",
    "--interactive-success": "#28a745",
    "--interactive-error": "#dc3545",
    "--interactive-warning": "#ffc107",
  },
  "UI Elements": {
    "--titlebar-background": "#252525",
    "--titlebar-background-focused": "#303030",
    "--titlebar-text-color": "#e0e0e0",
    "--sidebar-background": "#252525",
    "--sidebar-border-color": "#333333",
    "--header-background": "#2a2a2a",
    "--header-border-color": "#333333",
    "--vault-name-color": "#e0e0e0",
  },
  "Graph View": {
    "--graph-line": "#444444",
    "--graph-node": "#999999",
    "--graph-text": "#e0e0e0",
    "--graph-node-unresolved": "#dc3545",
    "--graph-node-focused": "#ffffff",
    "--graph-node-tag": "#86efac",
    "--graph-node-attachment": "#60a5fa",
  },
  Misc: {
    "--scrollbar-thumb-bg": "#444444",
    "--scrollbar-bg": "#2a2a2a",
    "--divider-color": "#444444",
  },
};

const DEFAULT_PROFILE = {
  vars: flattenVars(DEFAULT_VARS),
  themeType: "dark",
  snippets: [],
  convertImagesToJpg: false,
  jpgQuality: 85,
};

const OLED_MATRIX_PROFILE = {
  vars: {
    "--iconize-icon-color": "#00ff00",
    "--background-primary": "#000000",
    "--background-primary-alt": "#0a0a0a",
    "--background-secondary": "#050505",
    "--background-secondary-alt": "#101010",
    "--background-modifier-border": "#223322",
    "--background-modifier-border-hover": "#44ff44",
    "--background-modifier-border-focus": "#00ff00",
    "--background-modifier-flair": "#111111",
    "--background-modifier-hover": "#1a1a1a",
    "--background-modifier-active": "#002a00",
    "--text-normal": "#f0f0f0",
    "--text-muted": "#666666",
    "--text-faint": "#444444",
    "--text-on-accent": "#000000",
    "--text-accent": "#00ff00",
    "--text-accent-hover": "#88ff88",
    "--text-selection": "rgba(0, 255, 0, 0.3)",
    "--text-highlight-bg": "#00640080",
    "--interactive-normal": "#1c1c1c",
    "--interactive-hover": "#2c2c2c",
    "--interactive-accent": "#008a00",
    "--interactive-accent-hover": "#00ff00",
    "--interactive-success": "#28a745",
    "--interactive-error": "#dc3545",
    "--interactive-warning": "#ffc107",
    "--titlebar-background": "#000000",
    "--titlebar-background-focused": "#000000",
    "--titlebar-text-color": "#f0f0f0",
    "--sidebar-background": "#000000",
    "--sidebar-border-color": "#002a00",
    "--header-background": "#050505",
    "--header-border-color": "#223322",
    "--vault-name-color": "#00ff00",
    "--scrollbar-thumb-bg": "#222222",
    "--scrollbar-bg": "#000000",
    "--divider-color": "#223322",
    "--checklist-done-color": "#00ff00",
    "--graph-line": "#000000",
    "--graph-node": "#00ff00",
    "--graph-text": "#ffffff",
    "--graph-node-unresolved": "#00ff00",
    "--graph-node-focused": "#000000",
    "--graph-node-tag": "#000000",
    "--graph-node-attachment": "#54ee20",
    "--blockquote-color": "#54ee20",
    "--tag-color": "#0bd62d",
  },
  themeType: "dark",
  snippets: [],
  convertImagesToJpg: false,
  jpgQuality: 85,
};

const CITRUS_ZEST_PROFILE = {
  vars: {
    "--iconize-icon-color": "#FF8C00",
    "--background-primary": "#F5F5F5",
    "--background-primary-alt": "#f2eded",
    "--background-secondary": "#f2eded",
    "--background-secondary-alt": "#F0F0F0",
    "--background-modifier-border": "#E0E0E0",
    "--background-modifier-border-hover": "#FF8C00",
    "--background-modifier-border-focus": "#F57C00",
    "--background-modifier-flair": "#FFFFFF",
    "--background-modifier-hover": "#EEEEEE",
    "--background-modifier-active": "#E0E0E0",
    "--text-normal": "#3c3434",
    "--text-muted": "#ff7300",
    "--text-faint": "#ff7b00",
    "--text-on-accent": "#FFFFFF",
    "--text-accent": "#F57C00",
    "--text-accent-hover": "#FF9800",
    "--text-selection": "#f27602",
    "--text-highlight-bg": "#E0E0E0",
    "--interactive-normal": "#F5F5F5",
    "--interactive-hover": "#EEEEEE",
    "--interactive-accent": "#FF8C00",
    "--interactive-accent-hover": "#FFA726",
    "--interactive-success": "#4CAF50",
    "--interactive-error": "#F44336",
    "--interactive-warning": "#FFC107",
    "--titlebar-background": "#FFFFFF",
    "--titlebar-background-focused": "#F7F7F7",
    "--titlebar-text-color": "#e0e0e0",
    "--sidebar-background": "#FFFFFF",
    "--sidebar-border-color": "#E0E0E0",
    "--header-background": "#FDFDFD",
    "--header-border-color": "#E0E0E0",
    "--vault-name-color": "#F57C00",
    "--scrollbar-thumb-bg": "#BDBDBD",
    "--scrollbar-bg": "#F5F5F5",
    "--divider-color": "#E0E0E0",
    "--checklist-done-color": "#757575",
    "--graph-line": "#F57C00",
    "--graph-node": "#999999",
    "--graph-text": "#e0e0e0",
    "--graph-node-unresolved": "#F57C00",
    "--graph-node-focused": "#ffffff",
    "--graph-node-tag": "#F57C00",
    "--graph-node-attachment": "#F57C00",
  },
  themeType: "light",
  snippets: [],
  convertImagesToJpg: false,
  jpgQuality: 85,
};

const SOLARIZED_NEBULA_PROFILE = {
  vars: {
    "--iconize-icon-color": "#00a7b3",
    "--background-primary": "#002b36",
    "--background-primary-alt": "#073642",
    "--background-secondary": "#00212b",
    "--background-secondary-alt": "#073642",
    "--background-modifier-border": "#2a5f6f",
    "--background-modifier-border-hover": "#6c71c4",
    "--background-modifier-border-focus": "#268bd2",
    "--background-modifier-flair": "#073642",
    "--background-modifier-hover": "#073642",
    "--background-modifier-active": "#004354",
    "--text-normal": "#839496",
    "--text-muted": "#586e75",
    "--text-faint": "#4a5f68",
    "--text-on-accent": "#ffffff",
    "--text-accent": "#268bd2",
    "--text-accent-hover": "#5bb3e6ff",
    "--text-selection": "#586e7580",
    "--text-highlight-bg": "#cb4b1666",
    "--interactive-normal": "#073642",
    "--interactive-hover": "#004354",
    "--interactive-accent": "#268bd2",
    "--interactive-accent-hover": "#5ab3e6",
    "--interactive-success": "#859900",
    "--interactive-error": "#dc322f",
    "--interactive-warning": "#b58900",
    "--titlebar-background": "#00212b",
    "--titlebar-background-focused": "#073642",
    "--titlebar-text-color": "#839496",
    "--sidebar-background": "#00212b",
    "--sidebar-border-color": "#073642",
    "--header-background": "#002b36",
    "--header-border-color": "#073642",
    "--vault-name-color": "#b58900",
    "--scrollbar-thumb-bg": "#586e75",
    "--scrollbar-bg": "#00212b",
    "--divider-color": "#073642",
    "--checklist-done-color": "#859900",
    "--graph-line": "#444444",
    "--graph-node": "#999999",
    "--graph-text": "#e0e0e0",
    "--graph-node-unresolved": "#dc3545",
    "--graph-node-focused": "#ffffff",
    "--graph-node-tag": "#86efac",
    "--graph-node-attachment": "#60a5fa",
  },
  themeType: "dark",
  snippets: [],
  convertImagesToJpg: false,
  jpgQuality: 85,
};

const CYBERPUNK_SUNSET_PROFILE = {
  vars: {
    "--iconize-icon-color": "#737aa2",
    "--background-primary": "#1a1b26",
    "--background-primary-alt": "#1f202e",
    "--background-secondary": "#16161e",
    "--background-secondary-alt": "#24283b",
    "--background-modifier-border": "#414868",
    "--background-modifier-border-hover": "#ff79c6",
    "--background-modifier-border-focus": "#bb9af7",
    "--background-modifier-flair": "#2a2e42",
    "--background-modifier-hover": "#292e42",
    "--background-modifier-active": "#414868",
    "--text-normal": "#c0caf5",
    "--text-muted": "#737aa2",
    "--text-faint": "#565f89",
    "--text-on-accent": "#1a1b26",
    "--text-accent": "#bb9af7",
    "--text-accent-hover": "#dbb2ff",
    "--text-selection": "#bb9af74d",
    "--text-highlight-bg": "#ff79c64d",
    "--interactive-normal": "#24283b",
    "--interactive-hover": "#414868",
    "--interactive-accent": "#bb9af7",
    "--interactive-accent-hover": "#dbb2ff",
    "--interactive-success": "#9ece6a",
    "--interactive-error": "#f7768e",
    "--interactive-warning": "#e0af68",
    "--titlebar-background": "#16161e",
    "--titlebar-background-focused": "#1f202e",
    "--titlebar-text-color": "#c0caf5",
    "--sidebar-background": "#16161e",
    "--sidebar-border-color": "#414868",
    "--header-background": "#1f202e",
    "--header-border-color": "#414868",
    "--vault-name-color": "#ff79c6",
    "--scrollbar-thumb-bg": "#414868",
    "--scrollbar-bg": "#16161e",
    "--divider-color": "#414868",
    "--checklist-done-color": "#9ece6a",
    "--graph-line": "#414868",
    "--graph-node": "#999999",
    "--graph-text": "#414868",
    "--graph-node-unresolved": "#414868",
    "--graph-node-focused": "#ffffff",
    "--graph-node-tag": "#86efac",
    "--graph-node-attachment": "#414868",
  },
  themeType: "dark",
  snippets: [],
};

export const BUILT_IN_PROFILES_VARS = {
  Default: DEFAULT_PROFILE.vars,
  "OLED Matrix": OLED_MATRIX_PROFILE.vars,
  "Citrus Zest": CITRUS_ZEST_PROFILE.vars,
  "Solarized Nebula": SOLARIZED_NEBULA_PROFILE.vars,
  CyberPunk: CYBERPUNK_SUNSET_PROFILE.vars,
};

export const BUILT_IN_PROFILES_DATA = {
  Default: DEFAULT_PROFILE,
  "OLED Matrix": OLED_MATRIX_PROFILE,
  "Citrus Zest": CITRUS_ZEST_PROFILE,
  "Solarized Nebula": SOLARIZED_NEBULA_PROFILE,
  CyberPunk: CYBERPUNK_SUNSET_PROFILE,
};

export const DEFAULT_SETTINGS: PluginSettings = {
  pluginEnabled: true,
  language: "auto",
  useRtlLayout: true,
  overrideIconizeColors: true,
  cleanupInterval: 5,
  colorUpdateFPS: 10,
  activeProfile: "Default",
  profiles: JSON.parse(JSON.stringify(BUILT_IN_PROFILES_DATA)),
  globalSnippets: [],
  pinnedSnapshots: {},
};

// Maps text color variables to their common backgrounds for contrast checking.
export const TEXT_TO_BG_MAP = {
  "--text-normal": "--background-primary",
  "--text-muted": "--background-primary",
  "--text-faint": "--background-primary",
  "--text-accent": "--background-primary",
  "--text-accent-hover": "--background-primary",
  "--h1-color": "--background-primary",
  "--h2-color": "--background-primary",
  "--h3-color": "--background-primary",
  "--h4-color": "--background-primary",
  "--h5-color": "--background-primary",
  "--h6-color": "--background-primary",
  "--blockquote-color": "--background-primary",
  "--text-on-accent": "--interactive-accent",
  "--vault-name-color": "--sidebar-background",
  "--titlebar-text-color": "--titlebar-background",
  "--graph-text": "--graph-node",
  "--checklist-done-color": "--background-primary",
  "--text-highlight-bg": "--text-normal",
  "--tag-color": "--tag-bg",
  // "--iconize-icon-color": "--background-secondary",
  // "--cm-notice-text-default": "--cm-notice-bg-default",
};
